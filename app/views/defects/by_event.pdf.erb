<div class="jumbotron bg-secondary text-white">
  <h1 class="text-center">Events with Defects Present</h1>
</div>

<% @event_results.each do |event| %>
<div class="card my-3">
  <div class="card-header">
    <h4 class="event_title font-weight-bold"> Event <%= event.id %></h4> 
    <h5 class="event_title" id="event_type"><%= event.class_type%></h5> 
    <h5 class="event_title" id="event_location"><%= event.location%></h5>
    <h4 class="event_title">
      Date:
      <span class="badge badge-danger">
        <%= event.date.strftime('%D')%>
      </span>
    </h4>
  </div>
  <div class="card-body">
    <table class="table table-borderless table-hover table-sm">
      <thead>
      <tr>
        <th scope="row">ID</th>
        <th scope="row">Created On</th>
        <th scope="row">Vehicle</th>
        <th scope="row">Last Reported</th>
        <th scope="row">Event</th>
        <th scope="row">Category</th>
        <th scope="row">Description</th>
        <th scope="row">Status</th>
        <th scope="row">Date Fixed</th>
      </tr>
    </thead>
    <tbody>
      <% event.checklists.have_defects?.each do |checklist|%>
        <%= render 'defects_row', defects: Defect.where(checklist_id: checklist.id) %>
      <% end %>
    </tbody>
    </table>
  </div>
</div>
<% end %>

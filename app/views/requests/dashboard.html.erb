<div class="jumbotron text-center">
	<h1 class="display-3">Work Orders Dashboard</h1>
</div>

<div class="row">
	<div class="col-md-3">
		<div class="list-group">
			<a class="list-group-item list-group-item-action" style="background-color: lightgreen;" href="../requests/new">
				Create A Work Order
			</a>
				<a class="list-group-item list-group-item-action d-flex justify-content-between align-items-center" href="../requests">
					All Work Orders
					<span class="badge badge-primary">
						<%= @requests.all.count%>
					</span>
				</a>
				<a class="list-group-item list-group-item-action d-flex justify-content-between align-items-center" href="../requests/new_requests">
					New Work Orders
					 <span class="badge badge-dark">
						 <%= @requests.where(status: "New").count%>
					 </span>
				 </a>
				<a class="list-group-item list-group-item-action d-flex justify-content-between align-items-center" 					href="../requests/in_progress">
					In-Progress Work Orders
					<span class="badge badge-dark">
						<%= @requests.where(status: "In-Progress").count%>
					</span>
				</a>
				<a class="list-group-item list-group-item-action d-flex justify-content-between align-items-center" 					href="../requests/completed_requests">
					Completed Work Orders
					<span class="badge badge-dark">
						<%= @requests.where(status: "Completed").count%>
					</span>
				</a>
				<a class="list-group-item list-group-item-action list-group-item-danger d-flex justify-content-between align-items-center" 					href="../requests/overdue">
					Overdue Work Orders
					<span class="badge badge-danger">
						<%= @requests.where(tracker_id: "Overdue").count%>
					</span>
				</a>
				
				<a class="list-group-item list-group-item-action" href="../assigned_work_orders" style="background-color: lightgrey;">Assigned Work Orders</a>	
				
				<a class="list-group-item list-group-item-action" href="../completed_work_orders" style="background-color: lightgrey;">Completed Work Orders</a>	
				
			</div>
		
			
	</div>
	<div class="col-md-6">
		<div class="card">
		<div class="card-body">
			<p>
				To create a work order:
				<ul style='list-style-type: decimal;'>
					<li> Click on the <span style="color: lightgreen;"> Create a Work Order</span> Link to the left </li>
					<li> Fill out the pertient fields of the work order.<br \> *You can also upload images for each work order* </li>
					<li> Ensure that completion date is beyond today's current date, unless entering in a previous work order. </li>
					<li> Hit Create Work Order</li>
					<li style="color: firebrick;"> *Ensure to update status each time you open or work on a Work Order. If past the estimated completion date, the Work Order will become Overdue.* </li>
			</p>
		</div>
		</div>	
					
				
				
		</div>
	
	
	<div class="col-md-3">
				<div class="list-group">
					<a class="list-group-item list-group-item-action d-flex 						justify-content-between align-items-center" 						href="../requests/a_service">
						A-Service Work Orders
							<span class="badge badge-dark">
								<%= @a_service_requests.count%>
							</span>
					</a>
				
					
						<a class="list-group-item list-group-item-action d-flex justify-content-between 					align-items-center" href="../requests/shock_service">
							Shock Service Work Orders 
							<span class="badge badge-dark"><%= @shock_service_requests.count%>
							</span>
						</a>
					
						<a class="list-group-item list-group-item-action d-flex justify-content-between 					align-items-center" href="../requests/air_filter_service">
							Air Filter Service Work Orders 
							<span class="badge badge-dark">
								<%= @air_filter_requests.count%>
							</span>
						</a>
		
						<a class="list-group-item list-group-item-action d-flex justify-content-between 					align-items-center" href="../requests/repairs">
							Repair Work Orders
							<span class="badge badge-dark">
								<%= @repair_requests.count%>
							</span>
						</a>
				
						<a class="list-group-item list-group-item-action d-flex justify-content-between 					align-items-center" href="../requests/defects">
							Defect Work Orders
							<span class="badge badge-dark">
								<%= @defect_requests.count%>
							</span>
						</a>
					</div>
	
					
			</div>
	
</div>

	
<div class="row mt-4">
	
	<div class="col-md-4">
		<h5 class="text-center mb-2">New Work Orders</h5>
		
			<% @requests.where(status: "New").order(created_at: :desc).limit(5).each do |request|%>
			<div class="card mb-3">
				<div class="card-header d-flex justify-content-between align-items-center">
					<strong>Work Order #: <%=link_to request.id, request_path(id: request.id), class: "badge badge-warning" %></strong>
					<strong>Created:
				<span class="badge badge-info"><%=request.created_at.strftime('%D')%></span></strong></div>
					
		<div class="card-body">
		
		
			<ul class="list-group">
			<li class="list-group-item d-flex justify-content-between 						align-items-center">Car #
			<span class="badge badge-info"><%= request.vehicle.car_id%>
			</span>
			Type:
			<span class="badge badge-info"><%= request.program.name %> </span>
		</li>
		
			<li class="list-group-item d-flex justify-content-between align-items-center">Status
			<span class="badge badge-info"><%=request.status%></span>Requestor
			<span class="badge badge-info"><%= request.creator%></span></li>
			
		</ul>
		</div>
		
	<div class="card-footer d-flex justify-content-between align-items-center">
		<strong>Estimated Completion Date: </strong> <span class="badge badge-success"> <%= request.completion_date %></span>
	</div>
</div>
<hr>
	<% end %>	
	</div>
	<div class="col-md-4">
			<h5 class="text-center mb-2">In-Progress Work Orders</h5>
		
				<% @requests.where(status: "In-Progress").order(created_at: :desc).limit(5).each do |request|%>
				<div class="card mb-2">
					<div class="card-header d-flex justify-content-between align-items-center">
						<strong>Work Order #: <%=link_to request.id, request_path(id: request.id), class: "badge badge-warning" %></strong>
						<strong>Created:
					<span class="badge badge-info"><%=request.created_at.strftime('%D')%></span></strong></div>
					
			<div class="card-body">
		
		
					<ul class="list-group">
					<li class="list-group-item d-flex justify-content-between 						align-items-center">Car #
					<span class="badge badge-info"><%= request.vehicle.car_id%>
					</span>
					Type:
					<span class="badge badge-info"><%= request.program.name %> </span>
				</li>
		
					<li class="list-group-item d-flex justify-content-between align-items-center">Status
					<span class="badge badge-info"><%=request.status%></span>Requestor
					<span class="badge badge-info"><%= request.creator%></span></li>
			
				</ul>
			</div>
			<div class="card-footer d-flex justify-content-between align-items-center">
				<strong>Estimated Completion Date: </strong> <span class="badge badge-success"> <%= request.completion_date %></span>
			</div>
		</div>
		<hr>
		<% end %>
	</div>
	<div class="col-md-4">
			<h5 class="text-center mb-2">Overdue Work Orders</h5>
			
				<% @requests.where(status: "Overdue").order(created_at: :desc).limit(5).each do |request|%>
				<div class="card mb-2">
					<div class="card-header d-flex justify-content-between align-items-center">
						<strong>Work Order #: <%=link_to request.id, request_path(id: request.id), class: "badge badge-warning" %></strong>
						<strong>Created:
					<span class="badge badge-info"><%=request.created_at.strftime('%D')%></span></strong></div>
					
			<div class="card-body">
		
		
					<ul class="list-group">
					<li class="list-group-item d-flex justify-content-between 						align-items-center">Car #
					<span class="badge badge-info"><%= request.vehicle.car_id%>
					</span>
					Type:
					<span class="badge badge-info"><%= request.program.name %> </span>
				</li>
		
					<li class="list-group-item d-flex justify-content-between align-items-center">Status
					<span class="badge badge-info"><%=request.status%></span>Requestor
					<span class="badge badge-info"><%= request.creator%></span></li>
			
				</ul>
			</div>
			<div class="card-footer d-flex justify-content-between align-items-center">
				<strong>Estimated Completion Date: </strong> <span class="badge badge-danger"> <%= request.completion_date %></span>
			</div>
		</div>
		<hr>
		<% end %>
	</div>
</div>
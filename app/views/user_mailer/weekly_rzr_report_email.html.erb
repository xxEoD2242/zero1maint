	<h1 style='text-decoration: underline; text-align: center;'>Weekly RZR report for <%= (Time.now - 7.days).strftime('%D')%> - <%=Time.now.strftime('%D')%></h1>

		<div class="object-title">	
			<h2 style="text-align: center;">In-Service Razors<h2>
			</div>
	<table>
		
		<thead>
			<tr>
				<th scope="col">Vehicle Number</th>
				<th scope="col">Status</th>
				<th scope="col">Mileage</th>
				<th scope="col">Location</th>
				<th scope="col">Open Work Orders</th>
				<th scope="col">Near Service - Miles Until:</th>
				<th scope="col">Services Required</th>
			</tr>
		</thead>
		<tbody>
	      <% @vehicles.order(veh_category: :asc).each do |vehicle| %>
	        <tr>
	          <th scope="row"><%= vehicle.car_id %></th>
	  		  <td><%= vehicle.vehicle_status %></td>
	          <td><%= vehicle.mileage %></td>
	          <td><%= vehicle.location %></td>
	          <td><% vehicle.requests.where(tracker_id: @set_new && @set_progress).limit(3).each do |request| %>
	  		  		<%=request.number%>
	  				<%= request.tracker.track%>
	  				<% end %></td>
	          <td><% if vehicle.near_service == true %>
	  		 	<ul style="list-style-type:none;padding: 0;margin: 0;">
	  				<% if (@set_a_service.interval - (vehicle.mileage - vehicle.last_a_service)) <= 100 %>
	  				<li> A-Service in <br \> <%= (@set_a_service.interval - (vehicle.mileage - vehicle.last_a_service))%> Miles </li> <% end %>
	  		     <%  if (@set_shock_service.interval - (vehicle.mileage - vehicle.last_shock_service)) <= 200 %> 
	  			<li>Shock Service in <br \> <%= (@set_shock_service.interval - (vehicle.mileage - vehicle.last_shock_service)) %> Miles</li>
	  			<% end %>
	  		      <% if (@set_air_filter_service.interval - (vehicle.mileage - vehicle.last_air_filter_service)) <= 50 %>
	  				<li>Air Filter Change in <br \><%= (@set_air_filter_service.interval - (vehicle.mileage - vehicle.last_air_filter_service))%> Miles</li><% end %>
	  				<% end %>
	  			</ul>
	  		 </td>
	  		  <td>
	  			<% if vehicle.a_service == true %>
	           A-Service 
	  			  <% end %>
	         <% if vehicle.shock_service == true  %>
	          Shock-Service 
	  			 <% end %>
	  			 <% if vehicle.air_filter_service == true %>
	  			Air Filter Service 
	          <% end %>
	  		  <% if vehicle.repair_needed == true %>
	  		  Repairs In Progress
	  		  <% end %>
			  <% if vehicle.defect == true %>
			  Defect Reported
			  <%  vehicle.requests.where(program_id: @set_defects.id, tracker_id: @set_new.id).each do |request|%>
			 		<br \>&nbsp;&nbsp;&nbsp;&nbsp;<strong>Description:</strong> <%= request.description %>
			 		<% end %>
			  <% end %>
	  	 </td>
		</tr>
		<% end %>
		</tbody>
	</table>
</div>

<br \>
	<div>
		<div class="object-title">
			<h2 style="text-align: center;">Out-Of-Service Razors</h2>
		</div>
	<table>
		<thead>
			<tr>
				<th scope="col">Vehicle Number</th>
				<th scope="col">Status</th>
				<th scope="col">Mileage</th>
				<th scope="col">Location</th>
				<th scope="col">Open Work Orders</th>
				<th scope="col">Near Service - Miles Until:</th>
				<th scope="col">Services Required</th>
			</tr>
		</thead>
		<tbody>
	      <% @out_of_service.order(veh_category: :asc).each do |vehicle| %>
	        <tr>
	          <th scope="row"><%= vehicle.car_id %></th>
	  		  <td><%= vehicle.vehicle_status %></td>
	          <td><%= vehicle.mileage %></td>
	          <td><%= vehicle.location %></td>
	          <td><% vehicle.requests.where(tracker_id: @set_new && @set_progress).limit(3).each do |request| %>
	  		  		<%=request.number%>
	  				<%= request.tracker.track%>
	  				<% end %></td>
		        <td><% if vehicle.near_service == true %>
				 	<ul style="list-style-type:none;padding: 0;margin: 0;">
						<% if (@set_a_service.interval - (vehicle.mileage - vehicle.last_a_service)) <= 100 %>
						<li> A-Service in <br \> <%= (@set_a_service.interval - (vehicle.mileage - vehicle.last_a_service))%> Miles </li> <% end %>
				     <%  if (@set_shock_service.interval - (vehicle.mileage - vehicle.last_shock_service)) <= 200 %> 
					<li>Shock Service in <br \> <%= (@set_shock_service.interval - (vehicle.mileage - vehicle.last_shock_service)) %> Miles</li>
					<% end %>
				      <% if (@set_air_filter_service.interval - (vehicle.mileage - vehicle.last_air_filter_service)) <= 50 %>
						<li>Air Filter Change in <br \><%= (@set_air_filter_service.interval - (vehicle.mileage - vehicle.last_air_filter_service))%> Miles</li><% end %>
						<% end %>
					</ul>
				 </td>
	  		  <td>
	  			<% if vehicle.a_service == true %>
	           A-Service 
	  			  <% end %>
	         <% if vehicle.shock_service == true  %>
	          Shock-Service 
	  			 <% end %>
	  			 <% if vehicle.air_filter_service == true %>
	  			Air Filter Service 
	          <% end %>
	  		  <% if vehicle.repair_needed == true %>
	  		  Repairs In Progress
	  		  <% end %>
			  <% if vehicle.defect == true %>
			  Defect Reported
			  <%  vehicle.requests.where(program_id: @set_defects.id, tracker_id: @set_new.id).each do |request|%>
			 		<br \>&nbsp;&nbsp;&nbsp;&nbsp;<strong>Description:</strong> <%= request.description %>
			 		<% end %>
			  <% end %>
	  	 </td>
		</tr>
		<% end %>
		</tbody>
	</table>

</div>
</div>
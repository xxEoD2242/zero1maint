
	
<table class="table table-bordered table-responsive table-striped">
  <thead>
    <tr>
      <th scope="col">Car</th>
		<th scope="col">Status</th>
      <th scope="col">Car Category</th>
      <th scope="col">Location</th>
      <th scope="col">Work Orders</th>
      <th scope="col">Mileage</th>
		<th scope="col">Near Service - Miles To:
		<th scope="col">Service Needed</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% vehicle.order(car_id: :asc).each do |vehicle| %>
      <tr>
        <th scope="row"><%= vehicle.car_id %></th>
		  <td><%= vehicle.vehicle_status %></td>
        <td><%= vehicle.vehicle_category.name %></td>
        <td><%= vehicle.location.locale %></td>
        <td><% vehicle.requests.where(tracker_id: 1).limit(3).each do |request| %>
		  		<%= link_to request.id, request, method: :get, class: "badge badge-primary" %>
				<%= request.tracker.track%>
				<% end %></td>
        <td><%= vehicle.mileage %></td>
        <td><% if vehicle.near_service == true %>
		 	<ul style="list-style-type:none;padding: 0;margin: 0;">
				<% if vehicle.requests.where(program_id: @set_a_service.id, tracker_id: @set_completed.id) != [] %>
				<li> A-Service: - <%= (@set_a_service.interval - (vehicle.mileage - vehicle.requests.where(program_id: @set_a_service.id, tracker_id: @set_completed.id).last.request_mileage))%> Miles </li> <% end %>
		     <%  if vehicle.requests.where(program_id: @set_shock_service.id, tracker_id: @set_completed.id) != [] %> 
			<li>Shock Service: - <%= (@set_shock_service.interval - (vehicle.mileage - vehicle.requests.where(program_id: @set_shock_service.id, tracker_id: @set_completed.id).last.request_mileage)) %> Miles</li>
			<% end %>
		      <% if vehicle.requests.where(program_id: @set_air_filter_service.id, tracker_id: @set_completed.id) != [] %>
				<li>Air Filter Change: - <%= (@set_air_filter_service.interval - (vehicle.mileage - vehicle.requests.where(program_id: @set_air_filter_service.id, tracker_id: @set_completed.id).last.request_mileage))%> Miles</li><% end %>
				<% end %>
			</ul>
		 </td>
		  <td>
			<% if vehicle.a_service == true %>
         <%= link_to "A-Service", vehicle_path(id: vehicle.id), class: "badge badge-info" %>
			  <% end %>
       <% if vehicle.shock_service == true  %>
         <%= link_to "Shock-Service", vehicle_path(id: vehicle.id), class: "badge badge-info" %>
			 <% end %>
			 <% if vehicle.air_filter_service == true %>
			<%= link_to "Air Filter Service", vehicle_path(id: vehicle.id), class: "badge badge-info" %>
        <% end %>
		  <% if vehicle.repair_needed == true %>
		  <%= link_to "Repairs In Progress", vehicle_path(id: vehicle.id), class: "badge badge-info"%>
		  <% end %>
	 </td>
      <td><%= link_to 'Show', vehicle, class: "btn btn-primary btn-sm" %></td>
		<td>
      <%= link_to 'Edit', edit_vehicle_path(vehicle), class: "btn btn-sm btn-info" %>
     </td>
	  <td><%= link_to 'Delete', vehicle, method: :delete, data: {confirm: "Are you sure?"}, class: "btn btn-danger btn-sm" %></td>
      </tr>
    <% end %> 
  </tbody> 
</table>





